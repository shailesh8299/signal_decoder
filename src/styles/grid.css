/* ---------- Theme variables (light/dark) ---------- */
/* Put this at the top of your grid.css (or index.css) */
:root {
  /* defaults (dark) */
  --bg: #111318;
  --panel-bg: #1f2937;
  --text: #e6eef8;
  --muted: #9ca3af;
  --cell-bg: #e5e7eb;       /* default cell background */
  --cell-border: #4b5563;
  --selected-bg: #1d4ed8;   /* blue */
  --active-bg-start: #fef3c7;
  --active-bg-end: #fde68a;
  --control-bg: #0b1220;
}

/* ---------- Theme toggle small styles ---------- */
.theme-toggle {
  display: inline-flex;
  align-items: center;
  gap: 6px;
  padding: 6px 10px;
  border-radius: 8px;
  border: 1px solid rgba(255,255,255,0.06);
  background: var(--control-bg);
  color: var(--text);
  font-weight: 600;
  font-size: 14px;
  cursor: pointer;
  box-shadow: 0 6px 12px rgba(0,0,0,0.35);
}
.theme-toggle svg { opacity: 0.95; }
.theme-toggle:focus { outline: none; box-shadow: 0 8px 18px rgba(0,0,0,0.45); }

/* make the header/title use theme variables */
h1, h1 span {
  color: var(--text);
}

/* apply variables to common controls so theme actually colors them */
.control-button {
  background: var(--control-bg);
  color: var(--text);
  border: 1px solid rgba(255,255,255,0.04);
  padding: 8px 12px;
  border-radius: 8px;
  cursor: pointer;
  box-shadow: 0 6px 12px rgba(0,0,0,0.35);
}

/* use variables for grid/cell base colors */
.sd-cell {
  background: var(--cell-bg);
  border: 1px solid var(--cell-border);
  color: var(--text);
}

/* selected uses variable */
.sd-cell.selected {
  background: var(--selected-bg);
  color: white;
}

/* active (non-flashing) uses variables */
.sd-cell.active {
  background: linear-gradient(180deg, var(--active-bg-start), var(--active-bg-end));
  border-color: #f59e0b;
  color: #92400e;
}

/* result states â€” keep distinct but use text color variable where useful */
.sd-cell.result-correct { border-color:#16a34a; color:#064e3b; }
.sd-cell.result-wrong { border-color:#dc2626; color:#7f1d1d; }
.sd-cell.result-missed { border: 2px dashed #f59e0b; }

/* body/panel backgrounds use variables */
body {
  background: var(--bg);
  color: var(--text);
}
.sd-grid-wrapper {
  background: transparent; /* keep wrapper transparent so page bg shows */
}

/* small responsive tweak for the header row so toggle aligns nicely */
header, .app-header {
  display: flex;
  align-items: center;
  gap: 12px;
}

/* smaller title when screen narrow */
@media (max-width: 720px) {
  .theme-toggle .theme-toggle-label { display: none; } /* hide label on small screens */
  .theme-toggle { padding: 6px; }
}


/* Light theme overrides */
.light-theme {
  --bg: #f7fafc;
  --panel-bg: #ffffff;
  --text: #0f172a;
  --muted: #475569;
  --cell-bg: #ffffff;
  --cell-border: #d1d5db;
  --selected-bg: #1e40af;
  --active-bg-start: #fff7ed;
  --active-bg-end: #ffedd5;
  --control-bg: #e6edf3;
}

/* Dark theme explicitly (optional - same as default but makes toggling explicit) */
.dark-theme {
  --bg: #111318;
  --panel-bg: #1f2937;
  --text: #e6eef8;
  --muted: #9ca3af;
  --cell-bg: #e5e7eb;
  --cell-border: #4b5563;
  --selected-bg: #1d4ed8;
  --active-bg-start: #fef3c7;
  --active-bg-end: #fde68a;
  --control-bg: #0b1220;
}

/* Apply page-level background & text using the variables */
body {
  background: var(--bg);
  color: var(--text);
  margin: 0;
  font-family: Inter, system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial;
}

/* Use variables inside relevant pieces (examples below will be used by the rest of the CSS) */
.sd-cell {
  background: var(--cell-bg);
  border: 1px solid var(--cell-border);
}

/* selected */
.sd-cell.selected {
  background: var(--selected-bg);
  color: white;
}

/* active (non-flashing) */
.sd-cell.active {
  background: linear-gradient(180deg, var(--active-bg-start), var(--active-bg-end));
  border-color: #f59e0b;
  color: #92400e;
}

/* control-button background uses control var */
.control-button {
  background: var(--control-bg);
  color: var(--text);
}


:root {
  --cell-size: 56px;
  --gap: 8px;
}

/* layout */
.sd-grid-wrapper {
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 12px;
}

/* responsive grid: uses CSS grid with --n columns */
.sd-grid {
  display: grid;
  gap: var(--gap);
  grid-template-columns: repeat(var(--n), minmax(var(--cell-size), 1fr));
  width: calc(var(--n) * (var(--cell-size) + var(--gap)) - var(--gap));
  justify-content: center;
}

/* base cell */
.sd-cell {
  width: var(--cell-size);
  height: var(--cell-size);
  border-radius: 6px;
  border: 1px solid #ccc;
  background: white;
  display: inline-flex;
  align-items: center;
  justify-content: center;
  font-weight: 600;
  cursor: pointer;
  transition: transform .12s ease, background-color .12s ease, box-shadow .12s ease;
  user-select: none;
}

.sd-cell:hover {
  transform: translateY(-3px);
  box-shadow: 0 6px 14px rgba(0,0,0,0.06);
}

/* label inside cell (index) */
.sd-cell .cell-label {
  font-weight: 700;
  transition: transform 0.18s ease, font-size 0.18s ease, color 0.12s ease;
  font-size: 14px;
}

/* selected (user picks) */
.sd-cell.selected {
  background: #1d4ed8; /* blue */
  color: white;
  border-color: #1e40af;
  box-shadow: 0 6px 14px rgba(30,64,175,0.12);
}

/* disabled */
.sd-cell.disabled {
  opacity: 0.6;
  cursor: not-allowed;
}

/* result states after Check Answer */
.sd-cell.result-correct {
  background: linear-gradient(180deg, #bbf7d0, #86efac);
  border-color: #16a34a;
  color: #064e3b;
  box-shadow: 0 6px 14px rgba(16,185,129,0.12);
}

.sd-cell.result-wrong {
  background: linear-gradient(180deg, #fecaca, #fca5a5);
  border-color: #dc2626;
  color: #7f1d1d;
}

.sd-cell.result-missed {
  background: transparent;
  border: 2px dashed #f59e0b;
  color: #92400e;
  box-shadow: none;
}

/* ensure result classes override other styles for clarity */
.sd-cell.result-correct.selected,
.sd-cell.result-wrong.selected,
.sd-cell.result-missed.active {
  box-shadow: none;
  pointer-events: auto;
}

/* default active styling (non-flashing) - subtle yellow */
.sd-cell.active {
  background: linear-gradient(180deg, #fef3c7, #fde68a);
  border-color: #f59e0b;
  color: #92400e;
}

/* === Flashing animation (only when element has 'flashing' class) === */
@keyframes sd-flash {
  0% { box-shadow: 0 0 0 0 rgba(245,158,11,0.0); transform: scale(1); }
  40% { box-shadow: 0 10px 30px rgba(245,158,11,0.20); transform: scale(1.03); }
  100% { box-shadow: 0 0 0 0 rgba(245,158,11,0.0); transform: scale(1); }
}

.sd-cell.flashing {
  animation: sd-flash 1s ease-in-out infinite;
  background: linear-gradient(180deg, #fef3c7, #fde68a);
  border-color: #f59e0b;
  color: #92400e;
}

/* enlarge the label while flashing for visibility */
.sd-cell.flashing .cell-label {
  font-size: 18px;
  transform: scale(1.06);
  color: #7a2e00;
}

/* remove native focus rings on cells */
.sd-cell:focus {
  outline: none;
  box-shadow: 0 6px 14px rgba(0,0,0,0.06);
}

/* control buttons (simple styling) */
.control-button {
  outline: none;
  border: none;
  padding: 8px 12px;
  border-radius: 8px;
  background: #111827;
  color: #fff;
  box-shadow: 0 6px 12px rgba(0,0,0,0.35);
  cursor: pointer;
}

.control-button:disabled {
  opacity: 0.5;
  cursor: not-allowed;
}
